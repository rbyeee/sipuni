
<script src="//cdnjs.cloudflare.com/ajax/libs/ScrollMagic/2.0.7/ScrollMagic.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/ScrollMagic/2.0.7/plugins/debug.addIndicators.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
<script src="../js/db/jq.js"></script>
<script src="../js/db/jquery.matchHeight-min.js"></script>

<script>
  let swiperCount = null;

  var swiper = new Swiper(".sw-sup", {
    effect: "coverflow",
    grabCursor: true,
    centeredSlides: true,
    slidesPerView: "auto",
    navigation: {
      nextEl: '.slider-container .swiper-button-next',
      prevEl: '.slider-container .swiper-button-prev',
    },
    coverflowEffect: {
      rotate: 20,
      stretch: 0,
      depth: 350,
      modifier: 1,
      slideShadows: false 
    },
  });

  function initSwiper() {
      const swiperElement = document.querySelector('.count-swiper');
      if (swiperElement && !swiperElement.swiper) {
          swiperCount = new Swiper(".count-swiper", {
              slidesPerView: 3,
              spaceBetween: 24,
              observer: true,
              observeParents: true,
              pagination: {
                  el: ".swiper-pagination",
              },
              breakpoints: {
                  1280: {
                      slidesPerView: 3,
                  },
                  990: {
                      slidesPerView: 2,
                  },
                  550: {
                      slidesPerView: 2,
                      autoHeight: true,
                  },
                  320: {
                      slidesPerView: 1,
                      autoHeight: true,
                  },
              },
          });
      }
  }


  $(document).ready(function() {
    initSwiper();
      if($(window).width() > 600) {
        $(".count__col").matchHeight();
      }
      $(".rate__item").matchHeight();
      if($(window).width() > 800) {
        $(".statistics__item").matchHeight();
      }

      $(".header-burger").on("click", function(e){
        e.preventDefault();

        $(".header-mobile").addClass("is-active")
      })

      $(".header-mobile-close").on("click", function(e) {
        e.preventDefault();

        $(".header-mobile").removeClass("is-active")
      })


      const $rate1 = $(".trigger-rate-1");
      const $tabsContainers = $(".rate-tabs");

      if (!$tabsContainers.length) return;

      $tabsContainers.each(function() {
          const $container = $(this);
          const $tabLinks = $container.find(".rate-tabs__link");

          const $section = $container.closest("section");
          if (!$section.length) return;
          $tabLinks.on("click", function(e) {
              e.preventDefault();

              const $link = $(this);
              const targetTab = $link.attr("data-tab");
              if (!targetTab) return;

              setTimeout(() => {

                initSwiper();

                $(".count__col").matchHeight();
                $(".rate__item ").matchHeight();
              }, 100)
              
              if (targetTab === "sim") {
                  $rate1.addClass("active");
              } else if (targetTab === "numbers") {
                  $rate1.removeClass("active");
              }

              $tabLinks.removeClass("active");

              $section.find(".tab[data-tab-content]").removeClass("active");

              $link.addClass("active");

              $section.find(`.tab[data-tab-content="${targetTab}"]`).addClass("active");
          });
      });
  });
</script>
</body>
</html>