!function(){"use strict";function e(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,r){if(e){if("string"==typeof e)return t(e,r);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?t(e,r):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}document.addEventListener("DOMContentLoaded",function(){window.addEventListener("scroll",function(){var e=document.querySelector(".header");window.scrollY>50?e.classList.add("header--active"):e.classList.remove("header--active")});var t=new ScrollMagic.Controller,r=document.querySelectorAll(".step"),n=document.querySelectorAll(".step-image"),i=document.querySelector("#chronology"),a=1,o=-1;function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=document.querySelector('.step[data-step="'.concat(a,'"]')),o=a!==e&&!1===t;if(a!==e&&a>0&&!0===t&&i&&i.classList.add("step-down-active"),r.forEach(function(e){e.classList.remove("is-active","active-hidden")}),n.forEach(function(e){return e.classList.remove("is-active")}),o){var c=document.querySelector('.step[data-step="'.concat(e,'"]'));c&&c.classList.remove("step-down-active")}a!==e&&a>0&&i&&i.classList.add("active-hidden");var s=document.querySelector('.step[data-step="'.concat(e,'"]')),d=document.querySelector('.step-image[data-step="'.concat(e,'"]'));s&&(s.classList.add("is-active"),s.classList.remove("active-hidden")),d&&d.classList.add("is-active"),a=e}function s(){var e=100*(window.innerHeight-90)/100;return e+.5*e}var d=new ScrollMagic.Scene({triggerElement:"#chronology",triggerHook:0,offset:-90,duration:s()}).setPin(i,{pushFollowers:!0}).addTo(t).on("enter",function(){requestAnimationFrame(function(){i&&(i.style.top="90px")})}).on("update",function(){i&&"fixed"===window.getComputedStyle(i).position&&(i.style.top="90px")}).on("progress",function(e){var t=r.length;if(t){var n=-1===o||e.progress>o;o=e.progress;var i;if(e.progress<.7){var a=.7/(t-1);i=Math.min(t-2,Math.floor(e.progress/a))}else i=t-1;c(i+1,n)}}).on("leave",function(){i&&i.style.removeProperty("top")});window.addEventListener("resize",function(){d.duration(s())}),r.forEach(function(e){e.addEventListener("click",function(){var e,t=Number(this.getAttribute("data-step")),n=r.length;e=t<n?.7/(n-1)*(t-1):.85;var a=i.offsetTop-90+s()*e;window.scrollTo({top:a,behavior:"smooth"}),c(t)})}),c(1);var l,u,f=Array.from(document.querySelectorAll("[data-side-title]")),v=document.getElementById("sideNavList");if(v&&f.length){f.forEach(function(e){if(!e.id){var t=(e.getAttribute("data-side-title")||e.textContent||"section").toString().trim().toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9\-а-яё]/g,"").replace(/-+/g,"-").replace(/^-|-$/g,"");e.id=t||"section-".concat(Math.random().toString(36).slice(2,8))}var r=document.createElement("li");r.className="side-nav__item";var n=document.createElement("a");n.className="side-nav__link",n.href="#".concat(e.id),n.textContent=e.getAttribute("data-side-title")||e.textContent||"",r.appendChild(n),v.appendChild(r)});var m=Array.from(v.querySelectorAll(".side-nav__link"));m.forEach(function(e){e.addEventListener("click",function(t){t.preventDefault();var r=e.getAttribute("href").slice(1),n=document.getElementById(r);if(n){var i=n.getBoundingClientRect().top+window.pageYOffset-20;window.scrollTo({top:i,behavior:"smooth"})}})});var p=new IntersectionObserver(function(e){e.forEach(function(e){if(e.isIntersecting){var t=e.target.id;m.forEach(function(e){return e.classList.remove("active")});var r=v.querySelector('.side-nav__link[href="#'.concat(t,'"]'));r&&r.classList.add("active")}})},{root:null,rootMargin:"0% 0px -55% 0px",threshold:0});f.forEach(function(e){return p.observe(e)})}else{var h=Array.from(document.querySelectorAll(".side-nav__link"));if(h.length){var g=h.map(function(e){return(e.getAttribute("href")||"").trim()}).filter(function(e){return e.startsWith("#")}).map(function(e){return document.querySelector(e)}).filter(Boolean);h.forEach(function(e){e.addEventListener("click",function(t){var r=e.getAttribute("href")||"";if(r.startsWith("#")){t.preventDefault();var n=document.querySelector(r);if(n){var i=n.getBoundingClientRect().top+window.pageYOffset-20;window.scrollTo({top:i,behavior:"smooth"})}}})});var y=new IntersectionObserver(function(e){e.forEach(function(e){if(e.isIntersecting){var t=e.target.id;if(t){h.forEach(function(e){return e.classList.remove("active")});var r=document.querySelector('.side-nav__link[href="#'.concat(t,'"]'));r&&r.classList.add("active")}}})},{root:null,rootMargin:"-35% 0px -55% 0px",threshold:0});g.forEach(function(e){return y.observe(e)})}}!function(){var e=Array.from(document.querySelectorAll(".cat-1-item"));if(e.length){var t=null,r=!1,n=function(){for(var r=window.innerHeight||document.documentElement.clientHeight,n=r/2,i=null,a=1/0,o=0,c=e;o<c.length;o++){var s=c[o],d=s.getBoundingClientRect();if(!(d.bottom<-48||d.top>r+48)){var l=d.top+d.height/2,u=Math.abs(l-n);u<a&&(a=u,i=s)}}!function(e){t!==e&&(t&&t.classList.remove("is-active"),e&&e.classList.add("is-active"),t=e)}(i)},i=function(){r||(r=!0,requestAnimationFrame(function(){n(),r=!1}))};window.addEventListener("scroll",i,{passive:!0}),window.addEventListener("resize",i,{passive:!0}),n(),window.matchMedia&&window.matchMedia("(prefers-reduced-motion: reduce)").matches&&document.body.classList.add("reduce-motion")}}(),function(){var t=document.querySelector(".slider-wrapper"),r=document.getElementById("sliderPrev"),n=document.getElementById("sliderNext");if(t&&r&&n){var i=Array.from(t.querySelectorAll(".slider-card")),a=1,o=!1,c=i.map(function(e){return parseInt(e.getAttribute("data-index"))}),s=Math.min.apply(Math,e(c)),d=Math.max.apply(Math,e(c));n.addEventListener("click",function(e){e.preventDefault(),function(){if(!(o||a>=d)){o=!0;var e=i.find(function(e){return parseInt(e.getAttribute("data-index"))===a}),t=i.find(function(e){return parseInt(e.getAttribute("data-index"))===a+1});e&&t?(e.classList.remove("slider-card-active"),requestAnimationFrame(function(){e.classList.add("slider-card-exit-left"),t.classList.remove("slider-card-next"),requestAnimationFrame(function(){t.classList.add("slider-card-active")})}),setTimeout(function(){a++,l(),o=!1},1e3)):o=!1}}()}),r.addEventListener("click",function(e){e.preventDefault(),function(){if(!(o||a<=s)){o=!0;var e=i.find(function(e){return parseInt(e.getAttribute("data-index"))===a}),t=i.find(function(e){return parseInt(e.getAttribute("data-index"))===a-1});e&&t?(e.classList.remove("slider-card-active"),requestAnimationFrame(function(){e.classList.add("slider-card-exit-right"),t.classList.remove("slider-card-prev"),requestAnimationFrame(function(){t.classList.add("slider-card-active")})}),setTimeout(function(){a--,l(),o=!1},1e3)):o=!1}}()}),l()}function l(){i.forEach(function(e){var t=parseInt(e.getAttribute("data-index"))-a;e.classList.remove("slider-card-active","slider-card-prev","slider-card-next","slider-card-back-left","slider-card-back-right","slider-card-exit-left","slider-card-exit-right","slider-card-enter-right"),e.style.transform="",e.style.opacity="",0===t?e.classList.add("slider-card-active"):-1===t?e.classList.add("slider-card-prev"):1===t?e.classList.add("slider-card-next"):t<-1?e.classList.add("slider-card-back-left"):t>1&&e.classList.add("slider-card-back-right")}),r.disabled=a<=s,n.disabled=a>=d}}(),l=document.querySelector(".trigger-rate-1"),(u=document.querySelectorAll(".rate-tabs")).length&&u.forEach(function(e){var t=e.querySelectorAll(".rate-tabs__link"),r=e.closest("section");r&&t.forEach(function(e){e.addEventListener("click",function(n){n.preventDefault();var i=e.getAttribute("data-tab");if(i){"sim"===i?l.classList.add("active"):"numbers"===i&&l.classList.remove("active"),t.forEach(function(e){return e.classList.remove("active")}),r.querySelectorAll(".tab[data-tab-content]").forEach(function(e){return e.classList.remove("active")}),e.classList.add("active");var a=r.querySelector('.tab[data-tab-content="'.concat(i,'"]'));a&&a.classList.add("active")}})})})})}();