!function(){"use strict";document.addEventListener("DOMContentLoaded",function(){window.addEventListener("scroll",function(){var e=document.querySelector(".header");window.scrollY>50?e.classList.add("header--active"):e.classList.remove("header--active")});var e=new ScrollMagic.Controller,t=document.querySelectorAll(".step"),n=document.querySelectorAll(".step-image"),r=document.querySelector("#chronology"),o=1;function i(e){if(t.forEach(function(e){e.classList.remove("is-active","active-hidden")}),n.forEach(function(e){return e.classList.remove("is-active")}),o!==e&&o>0){var r=document.querySelector('.step[data-step="'.concat(o,'"]'));r&&r.classList.add("active-hidden")}var i=document.querySelector('.step[data-step="'.concat(e,'"]')),a=document.querySelector('.step-image[data-step="'.concat(e,'"]'));i&&(i.classList.add("is-active"),i.classList.remove("active-hidden")),a&&a.classList.add("is-active"),o=e}function a(){var e=100*(window.innerHeight-90)/100;return e+.5*e}var c=new ScrollMagic.Scene({triggerElement:"#chronology",triggerHook:0,offset:-90,duration:a()}).setPin(r,{pushFollowers:!0}).addTo(e).on("enter",function(){requestAnimationFrame(function(){r&&(r.style.top="90px")})}).on("update",function(){r&&"fixed"===window.getComputedStyle(r).position&&(r.style.top="90px")}).on("progress",function(e){var n=t.length;if(n){var r;if(e.progress<.7){var o=.7/(n-1);r=Math.min(n-2,Math.floor(e.progress/o))}else r=n-1;i(r+1)}}).on("leave",function(){r&&r.style.removeProperty("top")});window.addEventListener("resize",function(){c.duration(a())}),t.forEach(function(e){e.addEventListener("click",function(){var e,n=Number(this.getAttribute("data-step")),o=t.length;e=n<o?.7/(o-1)*(n-1):.85;var c=r.offsetTop-90+a()*e;window.scrollTo({top:c,behavior:"smooth"}),i(n)})}),i(1);var s=Array.from(document.querySelectorAll("[data-side-title]")),d=document.getElementById("sideNavList");if(d&&s.length){s.forEach(function(e){if(!e.id){var t=(e.getAttribute("data-side-title")||e.textContent||"section").toString().trim().toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9\-а-яё]/g,"").replace(/-+/g,"-").replace(/^-|-$/g,"");e.id=t||"section-".concat(Math.random().toString(36).slice(2,8))}var n=document.createElement("li");n.className="side-nav__item";var r=document.createElement("a");r.className="side-nav__link",r.href="#".concat(e.id),r.textContent=e.getAttribute("data-side-title")||e.textContent||"",n.appendChild(r),d.appendChild(n)});var l=Array.from(d.querySelectorAll(".side-nav__link"));l.forEach(function(e){e.addEventListener("click",function(t){t.preventDefault();var n=e.getAttribute("href").slice(1),r=document.getElementById(n);if(r){var o=r.getBoundingClientRect().top+window.pageYOffset-20;window.scrollTo({top:o,behavior:"smooth"})}})});var u=new IntersectionObserver(function(e){e.forEach(function(e){if(e.isIntersecting){var t=e.target.id;l.forEach(function(e){return e.classList.remove("active")});var n=d.querySelector('.side-nav__link[href="#'.concat(t,'"]'));n&&n.classList.add("active")}})},{root:null,rootMargin:"0% 0px -55% 0px",threshold:0});s.forEach(function(e){return u.observe(e)})}else{var f=Array.from(document.querySelectorAll(".side-nav__link"));if(f.length){var v=f.map(function(e){return(e.getAttribute("href")||"").trim()}).filter(function(e){return e.startsWith("#")}).map(function(e){return document.querySelector(e)}).filter(Boolean);f.forEach(function(e){e.addEventListener("click",function(t){var n=e.getAttribute("href")||"";if(n.startsWith("#")){t.preventDefault();var r=document.querySelector(n);if(r){var o=r.getBoundingClientRect().top+window.pageYOffset-20;window.scrollTo({top:o,behavior:"smooth"})}}})});var m=new IntersectionObserver(function(e){e.forEach(function(e){if(e.isIntersecting){var t=e.target.id;if(t){f.forEach(function(e){return e.classList.remove("active")});var n=document.querySelector('.side-nav__link[href="#'.concat(t,'"]'));n&&n.classList.add("active")}}})},{root:null,rootMargin:"-35% 0px -55% 0px",threshold:0});v.forEach(function(e){return m.observe(e)})}}!function(){var e=Array.from(document.querySelectorAll(".cat-1-item"));if(e.length){var t=null,n=!1,r=function(){for(var n=window.innerHeight||document.documentElement.clientHeight,r=n/2,o=null,i=1/0,a=0,c=e;a<c.length;a++){var s=c[a],d=s.getBoundingClientRect();if(!(d.bottom<-48||d.top>n+48)){var l=d.top+d.height/2,u=Math.abs(l-r);u<i&&(i=u,o=s)}}!function(e){t!==e&&(t&&t.classList.remove("is-active"),e&&e.classList.add("is-active"),t=e)}(o)},o=function(){n||(n=!0,requestAnimationFrame(function(){r(),n=!1}))};window.addEventListener("scroll",o,{passive:!0}),window.addEventListener("resize",o,{passive:!0}),r(),window.matchMedia&&window.matchMedia("(prefers-reduced-motion: reduce)").matches&&document.body.classList.add("reduce-motion")}}()})}();