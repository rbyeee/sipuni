!function(){"use strict";document.addEventListener("DOMContentLoaded",function(){window.addEventListener("scroll",function(){var e=document.querySelector(".header");window.scrollY>50?e.classList.add("header--active"):e.classList.remove("header--active")});var e=new ScrollMagic.Controller,t=document.querySelectorAll(".step"),r=document.querySelectorAll(".step-image"),i=document.querySelector("#chronology"),n=1;function o(e){if(t.forEach(function(e){e.classList.remove("is-active","active-hidden")}),r.forEach(function(e){return e.classList.remove("is-active")}),n!==e&&n>0){var i=document.querySelector('.step[data-step="'.concat(n,'"]'));i&&i.classList.add("active-hidden")}var o=document.querySelector('.step[data-step="'.concat(e,'"]')),a=document.querySelector('.step-image[data-step="'.concat(e,'"]'));o&&(o.classList.add("is-active"),o.classList.remove("active-hidden")),a&&a.classList.add("is-active"),n=e}function a(){var e=100*(window.innerHeight-90)/100;return e+.5*e}var c=new ScrollMagic.Scene({triggerElement:"#chronology",triggerHook:0,offset:-90,duration:a()}).setPin(i,{pushFollowers:!0}).addTo(e).on("enter",function(){requestAnimationFrame(function(){i&&(i.style.top="90px")})}).on("update",function(){i&&"fixed"===window.getComputedStyle(i).position&&(i.style.top="90px")}).on("progress",function(e){var r=t.length;if(r){var i;if(e.progress<.7){var n=.7/(r-1);i=Math.min(r-2,Math.floor(e.progress/n))}else i=r-1;o(i+1)}}).on("leave",function(){i&&i.style.removeProperty("top")});window.addEventListener("resize",function(){c.duration(a())}),t.forEach(function(e){e.addEventListener("click",function(){var e,r=Number(this.getAttribute("data-step")),n=t.length;e=r<n?.7/(n-1)*(r-1):.85;var c=i.offsetTop-90+a()*e;window.scrollTo({top:c,behavior:"smooth"}),o(r)})}),o(1);var s=Array.from(document.querySelectorAll("[data-side-title]")),d=document.getElementById("sideNavList");if(d&&s.length){s.forEach(function(e){if(!e.id){var t=(e.getAttribute("data-side-title")||e.textContent||"section").toString().trim().toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9\-а-яё]/g,"").replace(/-+/g,"-").replace(/^-|-$/g,"");e.id=t||"section-".concat(Math.random().toString(36).slice(2,8))}var r=document.createElement("li");r.className="side-nav__item";var i=document.createElement("a");i.className="side-nav__link",i.href="#".concat(e.id),i.textContent=e.getAttribute("data-side-title")||e.textContent||"",r.appendChild(i),d.appendChild(r)});var l=Array.from(d.querySelectorAll(".side-nav__link"));l.forEach(function(e){e.addEventListener("click",function(t){t.preventDefault();var r=e.getAttribute("href").slice(1),i=document.getElementById(r);if(i){var n=i.getBoundingClientRect().top+window.pageYOffset-20;window.scrollTo({top:n,behavior:"smooth"})}})});var u=new IntersectionObserver(function(e){e.forEach(function(e){if(e.isIntersecting){var t=e.target.id;l.forEach(function(e){return e.classList.remove("active")});var r=d.querySelector('.side-nav__link[href="#'.concat(t,'"]'));r&&r.classList.add("active")}})},{root:null,rootMargin:"0% 0px -55% 0px",threshold:0});s.forEach(function(e){return u.observe(e)})}else{var f=Array.from(document.querySelectorAll(".side-nav__link"));if(f.length){var v=f.map(function(e){return(e.getAttribute("href")||"").trim()}).filter(function(e){return e.startsWith("#")}).map(function(e){return document.querySelector(e)}).filter(Boolean);f.forEach(function(e){e.addEventListener("click",function(t){var r=e.getAttribute("href")||"";if(r.startsWith("#")){t.preventDefault();var i=document.querySelector(r);if(i){var n=i.getBoundingClientRect().top+window.pageYOffset-20;window.scrollTo({top:n,behavior:"smooth"})}}})});var p=new IntersectionObserver(function(e){e.forEach(function(e){if(e.isIntersecting){var t=e.target.id;if(t){f.forEach(function(e){return e.classList.remove("active")});var r=document.querySelector('.side-nav__link[href="#'.concat(t,'"]'));r&&r.classList.add("active")}}})},{root:null,rootMargin:"-35% 0px -55% 0px",threshold:0});v.forEach(function(e){return p.observe(e)})}}!function(){var e=Array.from(document.querySelectorAll(".cat-1-item"));if(e.length){var t=null,r=!1,i=function(){for(var r=window.innerHeight||document.documentElement.clientHeight,i=r/2,n=null,o=1/0,a=0,c=e;a<c.length;a++){var s=c[a],d=s.getBoundingClientRect();if(!(d.bottom<-48||d.top>r+48)){var l=d.top+d.height/2,u=Math.abs(l-i);u<o&&(o=u,n=s)}}!function(e){t!==e&&(t&&t.classList.remove("is-active"),e&&e.classList.add("is-active"),t=e)}(n)},n=function(){r||(r=!0,requestAnimationFrame(function(){i(),r=!1}))};window.addEventListener("scroll",n,{passive:!0}),window.addEventListener("resize",n,{passive:!0}),i(),window.matchMedia&&window.matchMedia("(prefers-reduced-motion: reduce)").matches&&document.body.classList.add("reduce-motion")}}(),function(){if(document.querySelector(".slider-swiper"))if("undefined"!=typeof Swiper)new Swiper(".slider-swiper",{centeredSlides:!0,slidesPerView:"auto",spaceBetween:20,effect:"slide",speed:600,loop:!0,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},on:{slideChange:function(){e(this)},init:function(){e(this)}}});else console.warn("Swiper.js не загружен");function e(e){var t=e.slides,r=e.realIndex,i=(e.visibleSlides,e.slides.length);t.forEach(function(t){var n=t.querySelector(".slider-card");if(n){var o=parseInt(t.getAttribute("data-swiper-slide-index")||t.swiperSlideIndex||"0");n.classList.remove("slider-card-active","slider-card-prev","slider-card-next","slider-card-back-left","slider-card-back-right");var a=o-r;e.params.loop&&(a>i/2?a-=i:a<-i/2&&(a+=i)),0===a?n.classList.add("slider-card-active"):-1===a?n.classList.add("slider-card-prev"):1===a?n.classList.add("slider-card-next"):a<-1?n.classList.add("slider-card-back-left"):a>1&&n.classList.add("slider-card-back-right")}})}}()})}();