!function(){"use strict";document.addEventListener("DOMContentLoaded",function(){window.addEventListener("scroll",function(){var e=document.querySelector(".header");window.scrollY>50?e.classList.add("header--active"):e.classList.remove("header--active")});var e=new ScrollMagic.Controller,t=document.querySelectorAll(".step"),n=document.querySelectorAll(".step-image"),r=document.querySelector("#chronology");function o(e){t.forEach(function(e){return e.classList.remove("active")}),n.forEach(function(e){return e.classList.remove("active")});var r=document.querySelector('.step[data-step="'.concat(e,'"]')),o=document.querySelector('.step-image[data-step="'.concat(e,'"]'));r&&r.classList.add("active"),o&&o.classList.add("active")}function i(){return 200*window.innerHeight/100}var a=new ScrollMagic.Scene({triggerElement:"#chronology",triggerHook:"onLeave",duration:i()}).setPin(r).addTo(e).on("progress",function(e){var n=t.length;if(n){var r=1/n;o(Math.min(n-1,Math.floor(e.progress/r))+1)}});window.addEventListener("resize",function(){a.duration(i())}),t.forEach(function(e){e.addEventListener("click",function(){var e=Number(this.getAttribute("data-step")),n=t.length,a=i()/n,c=r.offsetTop+a*(e-1);window.scrollTo({top:c,behavior:"smooth"}),o(e)})}),o(1);var c=Array.from(document.querySelectorAll("[data-side-title]")),s=document.getElementById("sideNavList");if(s&&c.length){c.forEach(function(e){if(!e.id){var t=(e.getAttribute("data-side-title")||e.textContent||"section").toString().trim().toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9\-а-яё]/g,"").replace(/-+/g,"-").replace(/^-|-$/g,"");e.id=t||"section-".concat(Math.random().toString(36).slice(2,8))}var n=document.createElement("li");n.className="side-nav__item";var r=document.createElement("a");r.className="side-nav__link",r.href="#".concat(e.id),r.textContent=e.getAttribute("data-side-title")||e.textContent||"",n.appendChild(r),s.appendChild(n)});var l=Array.from(s.querySelectorAll(".side-nav__link"));l.forEach(function(e){e.addEventListener("click",function(t){t.preventDefault();var n=e.getAttribute("href").slice(1),r=document.getElementById(n);if(r){var o=r.getBoundingClientRect().top+window.pageYOffset-20;window.scrollTo({top:o,behavior:"smooth"})}})});var d=new IntersectionObserver(function(e){e.forEach(function(e){if(e.isIntersecting){var t=e.target.id;l.forEach(function(e){return e.classList.remove("active")});var n=s.querySelector('.side-nav__link[href="#'.concat(t,'"]'));n&&n.classList.add("active")}})},{root:null,rootMargin:"-35% 0px -55% 0px",threshold:0});c.forEach(function(e){return d.observe(e)})}else{var u=Array.from(document.querySelectorAll(".side-nav__link"));if(u.length){var f=u.map(function(e){return(e.getAttribute("href")||"").trim()}).filter(function(e){return e.startsWith("#")}).map(function(e){return document.querySelector(e)}).filter(Boolean);u.forEach(function(e){e.addEventListener("click",function(t){var n=e.getAttribute("href")||"";if(n.startsWith("#")){t.preventDefault();var r=document.querySelector(n);if(r){var o=r.getBoundingClientRect().top+window.pageYOffset-20;window.scrollTo({top:o,behavior:"smooth"})}}})});var v=new IntersectionObserver(function(e){e.forEach(function(e){if(e.isIntersecting){var t=e.target.id;if(t){u.forEach(function(e){return e.classList.remove("active")});var n=document.querySelector('.side-nav__link[href="#'.concat(t,'"]'));n&&n.classList.add("active")}}})},{root:null,rootMargin:"-35% 0px -55% 0px",threshold:0});f.forEach(function(e){return v.observe(e)})}}!function(){var e=Array.from(document.querySelectorAll(".cat-1-item"));if(e.length){var t=null,n=!1,r=function(){for(var n=window.innerHeight||document.documentElement.clientHeight,r=n/2,o=null,i=1/0,a=0,c=e;a<c.length;a++){var s=c[a],l=s.getBoundingClientRect();if(!(l.bottom<-48||l.top>n+48)){var d=l.top+l.height/2,u=Math.abs(d-r);u<i&&(i=u,o=s)}}!function(e){t!==e&&(t&&t.classList.remove("is-active"),e&&e.classList.add("is-active"),t=e)}(o)},o=function(){n||(n=!0,requestAnimationFrame(function(){r(),n=!1}))};window.addEventListener("scroll",o,{passive:!0}),window.addEventListener("resize",o,{passive:!0}),r(),window.matchMedia&&window.matchMedia("(prefers-reduced-motion: reduce)").matches&&document.body.classList.add("reduce-motion")}}()})}();